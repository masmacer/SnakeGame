<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>贪吃蛇小游戏</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="overflow-x:hidden;">
    <h1 style="letter-spacing:2px;font-size:2.2em;color:#fff;text-shadow:0 2px 8px #222;">贪吃蛇小游戏</h1>
    <a href="video.html" style="display:inline-block;margin-bottom:18px;margin-top:8px;padding:10px 28px;font-size:18px;background:linear-gradient(90deg,#4caf50 60%,#388e3c 100%);color:#fff;border-radius:8px;text-decoration:none;box-shadow:0 2px 8px #2224;transition:background 0.2s;">抖音视频下载工具</a>
    <div class="game-panel">
        <div class="game-controls">
            <label for="difficulty">选择难度：</label>
            <select id="difficulty">
                <option value="150">简单</option>
                <option value="100" selected>普通</option>
                <option value="60">困难</option>
            </select>
            <span id="score">分数：0</span>
        </div>
        <div class="game-canvas-wrap">
            <div style="width:100vw;max-width:420px;">
                <canvas id="game" style="width:100%;height:auto;max-width:100vw;max-height:70vw;min-width:220px;min-height:220px;" width="400" height="400"></canvas>
            </div>
            <button id="restart" style="display:none;">重新开始</button>
                <!-- 移动端方向操作区域 -->
                <div class="mobile-controls" style="margin:10px auto 0 auto;max-width:260px;display:flex;flex-direction:column;align-items:center;gap:8px;">
                    <button class="dir-btn" id="btn-up" style="width:60px;height:44px;">↑</button>
                    <div style="display:flex;gap:18px;">
                        <button class="dir-btn" id="btn-left" style="width:60px;height:44px;">←</button>
                        <button class="dir-btn" id="btn-down" style="width:60px;height:44px;">↓</button>
                        <button class="dir-btn" id="btn-right" style="width:60px;height:44px;">→</button>
                    </div>
                </div>
        </div>
    </div>
    <div class="game-desc">
        <strong>玩法说明：</strong><br>
        1. 使用键盘方向键控制蛇移动。<br>
        2. 吃到红色方块即可得分，蛇会变长。<br>
        3. 撞到墙壁或自己则游戏结束。<br>
        4. 点击“重新开始”按钮可重新游戏。
    </div>
    <script src="snake.js"></script>
        <script>
        // 移动端方向按钮事件
        function mobileDirBind() {
            var up = document.getElementById('btn-up');
            var down = document.getElementById('btn-down');
            var left = document.getElementById('btn-left');
            var right = document.getElementById('btn-right');
            if (!up) return;
            up.addEventListener('touchstart', function(e){window.setDirection && window.setDirection('UP');e.preventDefault();}, {passive:false});
            down.addEventListener('touchstart', function(e){window.setDirection && window.setDirection('DOWN');e.preventDefault();}, {passive:false});
            left.addEventListener('touchstart', function(e){window.setDirection && window.setDirection('LEFT');e.preventDefault();}, {passive:false});
            right.addEventListener('touchstart', function(e){window.setDirection && window.setDirection('RIGHT');e.preventDefault();}, {passive:false});
            // 兼容点击
            up.addEventListener('click', function(){window.setDirection && window.setDirection('UP');});
            down.addEventListener('click', function(){window.setDirection && window.setDirection('DOWN');});
            left.addEventListener('click', function(){window.setDirection && window.setDirection('LEFT');});
            right.addEventListener('click', function(){window.setDirection && window.setDirection('RIGHT');});
        }
        mobileDirBind();
        </script>
    <script>
    // 移动端自适应canvas尺寸
    function resizeCanvas() {
        const canvas = document.getElementById('game');
        let size = Math.min(window.innerWidth, 420, window.innerHeight-180);
        size = Math.max(size, 220);
        canvas.width = size;
        canvas.height = size;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    </script>
</body>
</html>